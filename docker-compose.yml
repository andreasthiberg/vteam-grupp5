version: "3"
networks:
    highfive:
services:
    mariadb:
        build: ./database
        restart: unless-stopped
        env_file: ./.env
        environment:
          - MYSQLDB_ROOT_PASSWORD=$MARIADB_ROOT_PASSWORD
          - MYSQLDB_DATABASE=$MARIADB_DATABASE
        networks:
          highfive:
    backend:
        depends_on:
          - mariadb
        build: ./backend
        container_name: "backend"
        volumes:
          - ./backend:/backend
        env_file: ./.env
        ports:
          - 3000:3000
        networks:
          highfive:
        restart: "always"
    webapp_kund:
        build: ./webapp_kund
        container_name: "webapp_kund"
        ports:
          - '3001:3000'
        networks:
          highfive:
    webapp_admin:
        build: ./webapp_admin
        container_name: "webapp_admin"
        ports:
          - '3002:3000'
        networks:
          highfive:
    scooter_brain:
        depends_on:
          - backend
        build: ./scooter_brain
        container_name: "scooter_brain"
        volumes:
          - ./scooter_brain:/scooter_brain
        env_file: ./.env
        networks:
          highfive:
        links:
            - backend:backend
        restart: "always"